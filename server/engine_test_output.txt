(node:34364) Warning: `--localstorage-file` was provided without a valid path
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL src/ecs/__tests__/Engine.test.ts
  Engine
    Ã— should cache component queries (3 ms)
    Ã— should invalidate cache when component is added (1 ms)
    âˆš should invalidate cache when component is removed
    Ã— should handle multiple component types independently (3 ms)

  â— Engine â€º should cache component queries

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 1
    Received array:  [{"components": {"TestComponent": {}}, "id": "test-id", "version": 1}]

    [0m [90m 33 |[39m         [90m// First call - should populate cache[39m
     [90m 34 |[39m         [36mconst[39m results1 [33m=[39m engine[33m.[39mgetEntitiesWithComponent([33mTestComponent[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 35 |[39m         expect(results1)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 36 |[39m
     [90m 37 |[39m         [90m// Second call - should use cache[39m
     [90m 38 |[39m         [36mconst[39m results2 [33m=[39m engine[33m.[39mgetEntitiesWithComponent([33mTestComponent[39m)[33m;[39m[0m

      at Object.<anonymous> (src/ecs/__tests__/Engine.test.ts:35:26)

  â— Engine â€º should invalidate cache when component is added

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 1
    Received array:  [{"components": {"TestComponent": {}}, "id": "test-id", "version": 1}]

    [0m [90m 52 |[39m
     [90m 53 |[39m         [36mconst[39m results [33m=[39m engine[33m.[39mgetEntitiesWithComponent([33mTestComponent[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 54 |[39m         expect(results)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 55 |[39m     })[33m;[39m
     [90m 56 |[39m
     [90m 57 |[39m     test([32m'should invalidate cache when component is removed'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/ecs/__tests__/Engine.test.ts:54:25)

  â— Engine â€º should handle multiple component types independently

    expect(received).toBe(expected) // Object.is equality

    - Expected  - 1
    + Received  + 1

      Object {
        "components": Object {
    -     "TestComponent": Object {},
    +     "AnotherComponent": Object {},
        },
        "id": "test-id",
        "version": 1,
      }

    [0m [90m 82 |[39m         expect(testResults)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m 83 |[39m         expect(anotherResults)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 84 |[39m         expect(testResults[[35m0[39m])[33m.[39mtoBe(entity1)[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 85 |[39m         expect(anotherResults[[35m0[39m])[33m.[39mtoBe(entity2)[33m;[39m
     [90m 86 |[39m     })[33m;[39m
     [90m 87 |[39m })[33m;[39m[0m

      at Object.<anonymous> (src/ecs/__tests__/Engine.test.ts:84:32)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 1 passed, 4 total
Snapshots:   0 total
Time:        1.251 s, estimated 2 s
Ran all test suites matching src/ecs/__tests__/Engine.test.ts.
